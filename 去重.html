<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¾®ä¿¡æ¥é¾™å»é‡æ’åºå·¥å…·</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3b82f6',
                        secondary: '#10b981',
                        neutral: '#64748b',
                        accent: '#8b5cf6',
                    },
                    fontFamily: {
                        inter: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
            .transition-custom {
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }
        }
    </style>
</head>
<body class="bg-gray-50 font-inter min-h-screen flex flex-col">
    <!-- å¯¼èˆªæ  -->
    <header class="bg-white shadow-md sticky top-0 z-50 transition-all duration-300">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <i class="fa fa-sort-numeric-asc text-primary text-2xl"></i>
                <h1 class="text-xl font-bold text-gray-800">å¾®ä¿¡æ¥é¾™å»é‡æ’åºå·¥å…·</h1>
            </div>
            <nav>
                <ul class="flex space-x-6">
                    <li><a href="#" class="text-gray-600 hover:text-primary transition-custom">é¦–é¡µ</a></li>
                    <li><a href="#" class="text-gray-600 hover:text-primary transition-custom">ä½¿ç”¨è¯´æ˜</a></li>
                    <li><a href="#" class="text-gray-600 hover:text-primary transition-custom">å…³äº</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- ä¸»è¦å†…å®¹åŒº -->
    <main class="flex-grow container mx-auto px-4 py-8">
        <section class="max-w-4xl mx-auto bg-white rounded-xl shadow-lg p-6 md:p-8 mb-8 transform hover:shadow-xl transition-custom">
            <h2 class="text-[clamp(1.5rem,3vw,2rem)] font-bold text-gray-800 mb-6 flex items-center">
                <i class="fa fa-file-text-o text-primary mr-3"></i>æ–‡æœ¬å¤„ç†
            </h2>
            
            <!-- æ–‡ä»¶ä¸Šä¼ åŒºåŸŸ -->
            <div class="mb-8">
                <label for="fileInput" class="block text-sm font-medium text-gray-700 mb-2">é€‰æ‹©æ–‡ä»¶</label>
                <div class="mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg hover:border-primary transition-custom">
                    <div class="space-y-1 text-center">
                        <i class="fa fa-cloud-upload text-4xl text-gray-400 mb-2"></i>
                        <div class="flex text-sm text-gray-600">
                            <label for="fileInput" class="relative cursor-pointer bg-white rounded-md font-medium text-primary hover:text-primary/80 focus-within:outline-none">
                                <span>ä¸Šä¼ æ–‡ä»¶</span>
                                <input id="fileInput" name="file" type="file" class="sr-only" accept=".txt">
                            </label>
                            <p class="pl-1">æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„</p>
                        </div>
                        <p class="text-xs text-gray-500" id="fileInfo">
                            æ”¯æŒ TXT æ–‡ä»¶ (æœ€å¤§ 10MB)
                        </p>
                    </div>
                </div>
            </div>
            
            <!-- æ–‡æœ¬è¾“å…¥åŒºåŸŸ -->
            <div class="mb-6">
                <label for="textInput" class="block text-sm font-medium text-gray-700 mb-2">æˆ–è€…ç›´æ¥è¾“å…¥æ–‡æœ¬</label>
                <div class="relative">
                    <textarea id="textInput" rows="10" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-custom resize-none" placeholder="è¯·è¾“å…¥éœ€è¦å¤„ç†çš„æ–‡æœ¬..."></textarea>
                    <div class="absolute bottom-3 right-3 text-xs text-gray-500">
                        <span id="charCount">0</span> å­—ç¬¦
                    </div>
                </div>
            </div>
            
            <!-- å¤„ç†æŒ‰é’® -->
            <div class="flex flex-wrap gap-4 mb-8">
                <button id="processBtn" class="flex-1 bg-primary hover:bg-primary/90 text-white font-medium py-2 px-4 rounded-lg transition-custom flex items-center justify-center">
                    <i class="fa fa-magic mr-2"></i> å¤„ç†æ–‡æœ¬
                </button>
                <button id="clearBtn" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium py-2 px-4 rounded-lg transition-custom flex items-center justify-center">
                    <i class="fa fa-eraser mr-2"></i> æ¸…ç©º
                </button>
                <button id="copyBtn" class="flex-1 bg-secondary hover:bg-secondary/90 text-white font-medium py-2 px-4 rounded-lg transition-custom flex items-center justify-center">
                    <i class="fa fa-copy mr-2"></i> å¤åˆ¶ç»“æœ
                </button>
            </div>
            
            <!-- å¤„ç†ç»“æœåŒºåŸŸ -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">å¤„ç†ç»“æœ</label>
                <div class="relative">
                    <textarea id="resultOutput" rows="10" class="w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:ring-2 focus:ring-primary/50 focus:border-primary transition-custom resize-none" placeholder="å¤„ç†ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ..." readonly></textarea>
                    <div class="absolute bottom-3 right-3 text-xs text-gray-500">
                        <span id="resultCount">0</span> å­—ç¬¦
                    </div>
                </div>
            </div>
            
            <!-- ç»Ÿè®¡ä¿¡æ¯ -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                    <p class="text-sm text-gray-600 mb-1">åŸå§‹è¡Œæ•°</p>
                    <p id="originalCount" class="text-2xl font-bold text-gray-800">0</p>
                </div>
                <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                    <p class="text-sm text-gray-600 mb-1">é‡å¤è¡Œæ•°</p>
                    <p id="duplicateCount" class="text-2xl font-bold text-red-500">0</p>
                </div>
                <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                    <p class="text-sm text-gray-600 mb-1">å¤„ç†åè¡Œæ•°</p>
                    <p id="resultLineCount" class="text-2xl font-bold text-green-600">0</p>
                </div>
            </div>
        </section>
        
        <!-- ä½¿ç”¨è¯´æ˜ -->
        <section class="max-w-4xl mx-auto bg-white rounded-xl shadow-lg p-6 md:p-8 mb-8">
            <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                <i class="fa fa-info-circle text-primary mr-2"></i>ä½¿ç”¨è¯´æ˜
            </h2>
            <div class="space-y-4 text-gray-700">
                <p>è¿™ä¸ªå·¥å…·å¯ä»¥å¸®åŠ©ä½ å¯¹ç‰¹å®šæ ¼å¼çš„æ–‡æœ¬è¿›è¡Œå»é‡å’Œé‡æ–°æ’åºæ“ä½œã€‚</p>
                <h3 class="font-medium text-gray-800">æ”¯æŒçš„æ–‡æœ¬æ ¼å¼ï¼š</h3>
                <pre class="bg-gray-50 p-3 rounded-lg text-sm overflow-x-auto">1. é’Ÿæ…§ 2      ä¸ğŸ•Šï¸
2. é¾é¾  2      ä¸ğŸ•Šï¸
3. æ¨æ¨ 2      ä¸ğŸ•Šï¸</pre>
                <h3 class="font-medium text-gray-800">ä½¿ç”¨æ­¥éª¤ï¼š</h3>
                <ol class="list-decimal pl-5 space-y-2">
                    <li>ä¸Šä¼ åŒ…å«æ–‡æœ¬çš„TXTæ–‡ä»¶ï¼Œæˆ–ç›´æ¥åœ¨æ–‡æœ¬æ¡†ä¸­è¾“å…¥æ–‡æœ¬</li>
                    <li>ç‚¹å‡»"å¤„ç†æ–‡æœ¬"æŒ‰é’®è¿›è¡Œå»é‡å’Œæ’åº</li>
                    <li>å¤„ç†ç»“æœå°†æ˜¾ç¤ºåœ¨ä¸‹æ–¹çš„æ–‡æœ¬æ¡†ä¸­</li>
                    <li>ç‚¹å‡»"å¤åˆ¶ç»“æœ"æŒ‰é’®å¯ä»¥å¤åˆ¶å¤„ç†åçš„æ–‡æœ¬</li>
                </ol>
                <h3 class="font-medium text-gray-800">å¤„ç†è§„åˆ™ï¼š</h3>
                <ul class="list-disc pl-5 space-y-2">
                    <li>æ ¹æ®åç§°ã€æ•°å­—å’ŒçŠ¶æ€å®Œå…¨ç›¸åŒè¿›è¡Œå»é‡</li>
                    <li>é‡æ–°ç”Ÿæˆè¿ç»­çš„åºå·</li>
                    <li>ä¿ç•™åŸå§‹æ–‡æœ¬ä¸­çš„æ ¼å¼å’Œç‰¹æ®Šå­—ç¬¦</li>
                </ul>
            </div>
        </section>
    </main>

    <!-- é¡µè„š -->
    <footer class="bg-gray-800 text-white py-6">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <p class="text-sm text-gray-400">Â© 2025 å¾®ä¿¡æ¥é¾™å»é‡æ’åºå·¥å…·. ä¿ç•™æ‰€æœ‰æƒåˆ©.</p>
                </div>
                <div class="flex space-x-4">
                    <a href="#" class="text-gray-400 hover:text-white transition-custom">
                        <i class="fa fa-github text-xl"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white transition-custom">
                        <i class="fa fa-twitter text-xl"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white transition-custom">
                        <i class="fa fa-linkedin text-xl"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // æ–‡æœ¬å¤„ç†å‡½æ•°
        function processText(txtStr) {
              // æå–æ¯è¡Œæ•°æ®å¹¶è§£æ
    const lines = txtStr.split('\n');
    const parsedData = [];
    
    lines.forEach(line => {
        // ä¿®æ­£æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ›´å‡†ç¡®åœ°æå–æ¯è¡Œæ•°æ®
        const match = line.match(/^\s*(\d+)\.\s*([^0-9]+?)(\d*)\s*([^\n]*)/);
        if (match) {
            const [, index, name, number, status] = match;
            parsedData.push({
                name: name.trim(),
                number: number ? parseInt(number) : '',
                status: status.trim()
            });
        }
    });
    
    // å»é‡é€»è¾‘ï¼šæ ¹æ®åç§°ã€æ•°å­—å’ŒçŠ¶æ€å®Œå…¨ç›¸åŒè¿›è¡Œå»é‡
    const uniqueData = [];
    const seen = new Set();
    
    parsedData.forEach(item => {
        // æ ‡å‡†åŒ–çŠ¶æ€æ–‡æœ¬ï¼Œç§»é™¤å¸¸è§å˜ä½“å’Œç¬¦å·å·®å¼‚
        const normalizedStatus = item.status
            .replace(/[ğŸ•Šï¸ğŸ¦]/g, '')
            .replace(/ä¸é¸½/g, 'ä¸ğŸ•Šï¸')
            .replace(/ä¸é¸½/g, 'ä¸ğŸ•Šï¸')
            .replace(/ä¸.*é¸½/g, 'ä¸ğŸ•Šï¸')
            .trim();
        
        const key = `${item.name}-${item.number}-${normalizedStatus}`;
        if (!seen.has(key)) {
            seen.add(key);
            uniqueData.push({
                ...item,
                status: normalizedStatus || item.status // ä¿ç•™åŸå§‹çŠ¶æ€å¦‚æœæ ‡å‡†åŒ–åä¸ºç©º
            });
        }
    });
    
    // ç”Ÿæˆæ–°çš„æ–‡æœ¬
    let result = '';
    uniqueData.forEach((item, index) => {
        const lineNumber = index + 1;
        const numberPart = item.number ? ` ${item.number}` : '';
        // æ¢å¤åŸå§‹çŠ¶æ€æ˜¾ç¤º
        const displayStatus = item.status === 'ä¸ğŸ•Šï¸' ? 'ä¸ğŸ•Šï¸' : item.status;
        result += `${lineNumber}. ${item.name}${numberPart} ${displayStatus}\n`;
    });
    
    // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
    document.getElementById('originalCount').textContent = lines.length;
    document.getElementById('duplicateCount').textContent = lines.length - uniqueData.length;
    document.getElementById('resultLineCount').textContent = uniqueData.length;
    
    return result.trim();
        }

        // DOMå…ƒç´ 
        const fileInput = document.getElementById('fileInput');
        const textInput = document.getElementById('textInput');
        const resultOutput = document.getElementById('resultOutput');
        const processBtn = document.getElementById('processBtn');
        const clearBtn = document.getElementById('clearBtn');
        const copyBtn = document.getElementById('copyBtn');
        const charCount = document.getElementById('charCount');
        const resultCount = document.getElementById('resultCount');
        const fileInfo = document.getElementById('fileInfo');

        // æ›´æ–°å­—ç¬¦è®¡æ•°
        textInput.addEventListener('input', () => {
            charCount.textContent = textInput.value.length;
        });

        // å¤„ç†æ–‡ä»¶ä¸Šä¼ 
        fileInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                // æ£€æŸ¥æ–‡ä»¶å¤§å°
                if (file.size > 10 * 1024 * 1024) { // 10MB
                    alert('æ–‡ä»¶å¤§å°è¶…è¿‡10MBï¼Œè¯·é€‰æ‹©è¾ƒå°çš„æ–‡ä»¶ã€‚');
                    fileInput.value = '';
                    return;
                }
                
                // æ£€æŸ¥æ–‡ä»¶ç±»å‹
                if (!file.name.endsWith('.txt')) {
                    alert('è¯·ä¸Šä¼ TXTæ ¼å¼çš„æ–‡ä»¶ã€‚');
                    fileInput.value = '';
                    return;
                }
                
                // è¯»å–æ–‡ä»¶å†…å®¹
                const reader = new FileReader();
                reader.onload = (event) => {
                    textInput.value = event.target.result;
                    charCount.textContent = textInput.value.length;
                    fileInfo.textContent = `å·²é€‰æ‹©: ${file.name}`;
                };
                reader.readAsText(file);
            }
        });

        // å¤„ç†æ–‡æœ¬æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        processBtn.addEventListener('click', () => {
            const inputText = textInput.value.trim();
            if (!inputText) {
                alert('è¯·è¾“å…¥æ–‡æœ¬æˆ–ä¸Šä¼ æ–‡ä»¶');
                return;
            }
            
            // å¤„ç†æ–‡æœ¬
            const result = processText(inputText);
            resultOutput.value = result;
            resultCount.textContent = result.length;
            
            // æ·»åŠ åŠ¨ç”»æ•ˆæœ
            resultOutput.classList.add('ring-2', 'ring-green-400');
            setTimeout(() => {
                resultOutput.classList.remove('ring-2', 'ring-green-400');
            }, 1000);
        });

        // æ¸…ç©ºæŒ‰é’®ç‚¹å‡»äº‹ä»¶
        clearBtn.addEventListener('click', () => {
            textInput.value = '';
            resultOutput.value = '';
            charCount.textContent = '0';
            resultCount.textContent = '0';
            fileInput.value = '';
            fileInfo.textContent = 'æ”¯æŒ TXT æ–‡ä»¶ (æœ€å¤§ 10MB)';
            
            // é‡ç½®ç»Ÿè®¡ä¿¡æ¯
            document.getElementById('originalCount').textContent = '0';
            document.getElementById('duplicateCount').textContent = '0';
            document.getElementById('resultLineCount').textContent = '0';
        });

        // å¤åˆ¶ç»“æœæŒ‰é’®ç‚¹å‡»äº‹ä»¶
        copyBtn.addEventListener('click', () => {
            const resultText = resultOutput.value;
            if (!resultText) {
                alert('æ²¡æœ‰å¯å¤åˆ¶çš„ç»“æœ');
                return;
            }
            
            // å¤åˆ¶åˆ°å‰ªè´´æ¿
            resultOutput.select();
            document.execCommand('copy');
            
            // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸæç¤º
            const originalText = copyBtn.innerHTML;
            copyBtn.innerHTML = '<i class="fa fa-check mr-2"></i> å·²å¤åˆ¶';
            copyBtn.classList.remove('bg-secondary', 'hover:bg-secondary/90');
            copyBtn.classList.add('bg-green-600', 'hover:bg-green-700');
            
            setTimeout(() => {
                copyBtn.innerHTML = originalText;
                copyBtn.classList.remove('bg-green-600', 'hover:bg-green-700');
                copyBtn.classList.add('bg-secondary', 'hover:bg-secondary/90');
            }, 2000);
        });

        // å®ç°æ‹–æ”¾åŠŸèƒ½
        const dropArea = document.querySelector('.border-dashed');
        
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, preventDefaults, false);
        });
        
        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }
        
        ['dragenter', 'dragover'].forEach(eventName => {
            dropArea.addEventListener(eventName, highlight, false);
        });
        
        ['dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, unhighlight, false);
        });
        
        function highlight() {
            dropArea.classList.add('border-primary');
            dropArea.classList.add('bg-blue-50');
        }
        
        function unhighlight() {
            dropArea.classList.remove('border-primary');
            dropArea.classList.remove('bg-blue-50');
        }
        
        dropArea.addEventListener('drop', handleDrop, false);
        
        function handleDrop(e) {
            const dt = e.dataTransfer;
            const file = dt.files[0];
            
            if (file) {
                // æ£€æŸ¥æ–‡ä»¶å¤§å°
                if (file.size > 10 * 1024 * 1024) { // 10MB
                    alert('æ–‡ä»¶å¤§å°è¶…è¿‡10MBï¼Œè¯·é€‰æ‹©è¾ƒå°çš„æ–‡ä»¶ã€‚');
                    return;
                }
                
                // æ£€æŸ¥æ–‡ä»¶ç±»å‹
                if (!file.name.endsWith('.txt')) {
                    alert('è¯·ä¸Šä¼ TXTæ ¼å¼çš„æ–‡ä»¶ã€‚');
                    return;
                }
                
                // è¯»å–æ–‡ä»¶å†…å®¹
                const reader = new FileReader();
                reader.onload = (event) => {
                    textInput.value = event.target.result;
                    charCount.textContent = textInput.value.length;
                    fileInfo.textContent = `å·²é€‰æ‹©: ${file.name}`;
                    fileInput.files = dt.files;
                };
                reader.readAsText(file);
            }
        }

        // å¯¼èˆªæ æ»šåŠ¨æ•ˆæœ
        window.addEventListener('scroll', () => {
            const header = document.querySelector('header');
            if (window.scrollY > 10) {
                header.classList.add('py-2');
                header.classList.remove('py-3');
            } else {
                header.classList.add('py-3');
                header.classList.remove('py-2');
            }
        });
    </script>
</body>
</html>
    
